<div class="container py-4">

  <!-- Carregando -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-3 text-muted">Carregando comunicados...</p>
  </div>

  <!-- Erro -->
  <div *ngIf="hasError" class="alert alert-danger text-center">
    <i class="fas fa-exclamation-triangle me-2"></i> Erro ao carregar comunicados.
  </div>

  <ng-container *ngIf="!isLoading && !hasError">
    <!-- BotÃ£o Voltar -->
    <div class="mb-3">
      <a href="/" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-2"></i> Voltar Ã  Intranet
      </a>
    </div>

    <h2 class="text-center fw-bold mb-5">
      ðŸ“¢ Comunicados Internos
    </h2>

    <!-- Comunicado principal -->
    <div *ngIf="mainAnnouncement" class="card main-announcement-card mb-5 p-4 shadow-sm">
      <div class="row g-4 align-items-center">
        <div class="col-md-12">
          <div class="announcement-preview">
            <div class="announcement-icon">
              <i class="fas fa-bullhorn"></i>
            </div>
            <h3 class="fw-bold">{{ mainAnnouncement.title }}</h3>
            <p class="text-muted announcement-excerpt" [innerHTML]="getExcerpt(mainAnnouncement.content)"></p>
          </div>
          <div class="d-flex justify-content-between align-items-center mt-3">
            <small class="text-muted">
              Por <strong>{{ mainAnnouncement.userName || 'Administrador' }}</strong> â€¢ {{ mainAnnouncement.publishDate | date:'shortDate' }}
            </small>
            <a [routerLink]="['/comunicado', mainAnnouncement.id]" class="btn btn-primary">
              Ver Comunicado Completo <i class="fas fa-arrow-right ms-2"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Comunicados secundÃ¡rios -->
    <div class="row">
      <div class="col-md-4 mb-4" *ngFor="let announcement of announcementList">
        <div class="card h-100 shadow-sm announcement-hover">
          <div class="card-body">
            <div class="announcement-card-icon">
              <i class="fas fa-file-alt"></i>
            </div>
            <h5 class="card-title fw-semibold">{{ announcement.title }}</h5>
            <p class="card-text text-muted" [innerHTML]="getExcerpt(announcement.content)"></p>
          </div>
          <div class="card-footer d-flex flex-column small text-muted">
            <div class="mb-1">
              Por <strong>{{ announcement.userName || 'Administrador' }}</strong> â€¢ {{ announcement.publishDate | date:'shortDate' }}
            </div>
            <a [routerLink]="['/comunicado', announcement.id]" class="text-primary text-decoration-none">
              Ler mais <i class="fas fa-arrow-right ms-1"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- PaginaÃ§Ã£o -->
    <nav *ngIf="totalPages > 1" class="d-flex justify-content-center mt-5">
      <ul class="pagination pagination-lg">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="loadAnnouncements(currentPage - 1)">
            <i class="fas fa-chevron-left"></i>
          </button>
        </li>

        <li class="page-item"
            *ngFor="let page of [].constructor(totalPages); let i = index"
            [class.active]="currentPage === i + 1">
          <button class="page-link" (click)="loadAnnouncements(i + 1)">{{ i + 1 }}</button>
        </li>

        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="loadAnnouncements(currentPage + 1)">
            <i class="fas fa-chevron-right"></i>
          </button>
        </li>
      </ul>
    </nav>
  </ng-container>
</div>
