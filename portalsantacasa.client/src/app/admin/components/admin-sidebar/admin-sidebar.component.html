<!-- Sidebar Navigation Enhanced -->
<aside class="sidebar" [class.collapsed]="isCollapsed">
  <!-- Toggle Button -->
  <button class="sidebar-toggle" (click)="toggleSidebar()">
    <i class="fas" [class.fa-chevron-left]="!isCollapsed" [class.fa-chevron-right]="isCollapsed"></i>
  </button>

  <!-- Navigation Menu -->
  <nav class="sidebar-nav">
    <!-- Seções Dinâmicas -->
    <div class="nav-section"
         *ngFor="let section of sidebarConfig"
         [attr.data-area]="section.type"
         [style.display]="canViewSection(section) ? 'block' : 'none'">

      <!-- Cabeçalho da Seção -->
      <div class="section-header" *ngIf="!isCollapsed">
        <span class="section-title">{{ section.title }}</span>
      </div>

      <!-- Itens da Seção -->
      <ng-container *ngFor="let item of section.items">
        <!-- Item sem filhos -->
        <div *ngIf="!item.children && canViewItem(item)"
             class="nav-item"
             [class.active]="activeItem === item.id"
             (click)="navigateToItem(item)"
             [attr.data-tooltip]="item.label">
          <div class="nav-icon">
            <i [class]="item.icon"></i>
          </div>
          <span class="nav-text">{{ item.label }}</span>
          <span class="nav-badge"
                *ngIf="getBadgeValue(item) && getBadgeValue(item)! > 0"
                [class.birthday-badge]="item.badge === 'birthdaysBadge'">
            {{ getBadgeValue(item) }}
          </span>
        </div>

        <!-- Item com dropdown -->
        <div *ngIf="item.children && canViewItem(item)"
             class="nav-dropdown"
             [class.expanded]="expandedDropdowns.includes(item.id)">

          <!-- Trigger do Dropdown -->
          <div class="nav-item dropdown-trigger"
               [class.active]="isDropdownActive(item)"
               (click)="toggleDropdown(item.id)"
               [attr.data-tooltip]="item.label">
            <div class="nav-icon">
              <i [class]="item.icon"></i>
            </div>
            <span class="nav-text">{{ item.label }}</span>
            <div class="dropdown-arrow" *ngIf="!isCollapsed">
              <i class="fas fa-chevron-down"
                 [class.rotated]="expandedDropdowns.includes(item.id)"></i>
            </div>
          </div>

          <!-- Conteúdo do Dropdown -->
          <div class="dropdown-content"
               *ngIf="expandedDropdowns.includes(item.id) && !isCollapsed">
            <div *ngFor="let child of item.children"
                 class="nav-item dropdown-item"
                 [class.active]="activeItem === child.id"
                 (click)="navigateToItem(child)"
                 [style.display]="canViewItem(child) ? 'flex' : 'none'">
              <div class="nav-icon">
                <i [class]="child.icon"></i>
              </div>
              <span class="nav-text">{{ child.label }}</span>
              <span class="nav-badge"
                    *ngIf="getBadgeValue(child) && getBadgeValue(child)! > 0"
                    [class.birthday-badge]="child.badge === 'birthdaysBadge'">
                {{ getBadgeValue(child) }}
              </span>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </nav>

  <!-- Sidebar Footer -->
  <div class="sidebar-footer" *ngIf="!isCollapsed">
    <div class="footer-content">
      <div class="footer-stats">
        <div class="stat-item">
          <i class="fas fa-users"></i>
          <span>{{ onlineUsers }} online</span>
        </div>
        <div class="stat-item">
          <i class="fas fa-clock"></i>
          <span>{{ currentTime | date:'HH:mm' }}</span>
        </div>
      </div>
      <div class="footer-version">
        <span>Admin v2.0.0</span>
      </div>
    </div>
  </div>
</aside>

<!-- Mobile Overlay -->
<div *ngIf="showMobileOverlay" class="mobile-overlay" (click)="closeMobileSidebar()"></div>
